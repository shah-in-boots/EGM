% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/wfdb-annotation.R
\name{add_annotation}
\alias{add_annotation}
\title{Add an annotation table to an EGM object}
\usage{
add_annotation(x, annotation, overwrite = FALSE)
}
\arguments{
\item{x}{An \code{egm} object to which the annotation will be added}

\item{annotation}{An \code{annotation_table} object to add to the \code{egm} object}

\item{overwrite}{Logical. If an annotation with the same annotator name
already exists, should it be overwritten? If \code{FALSE} (default), the
annotations will be merged. If \code{TRUE}, the existing annotation will be
replaced.}
}
\value{
The modified \code{egm} object with the annotation table added
}
\description{
Add an \code{annotation_table} to an \code{egm} object, with validation
to ensure compatibility. The annotation table is added to the list of
annotations using the annotator name as the list name. If an annotation
with the same annotator name already exists, you can choose to overwrite
it or merge the annotations.
}
\section{Validation}{
The function performs several validation checks to ensure the annotation
table is compatible with the \code{egm} object:
\itemize{
\item \strong{Channel validation}: Checks that all channels referenced in the
annotation table (except channel 0, which is the global/default channel)
exist in the signal header.
\item \strong{Sample validation}: Checks that all sample indices in the annotation
table are within the valid range of samples in the recording.
}
}

\section{Handling Existing Annotations}{
When adding an annotation table with an annotator name that already exists:
\itemize{
\item \strong{Overwrite mode} (\code{overwrite = TRUE}): The existing annotation table
is completely replaced with the new one.
\item \strong{Merge mode} (\code{overwrite = FALSE}): The new annotations are combined
with the existing ones, duplicates are removed, and the result is sorted
by sample number.
}
}

\section{Empty Annotations}{
If the \code{egm} object has no existing annotations (empty list or blank
annotation table), the new annotation table will replace the empty
annotations.
}

\examples{
\dontrun{
# Add a new annotation table to an egm object
egm <- add_annotation(egm, my_annotation_table)

# Overwrite an existing annotation
egm <- add_annotation(egm, new_annotation, overwrite = TRUE)

# Merge with existing annotation (default)
egm <- add_annotation(egm, additional_annotation, overwrite = FALSE)
}

}
